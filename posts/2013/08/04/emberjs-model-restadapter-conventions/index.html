<!doctype html>
<html>
  <head>
    <meta charset="utf-8">

    <!-- Always force latest IE rendering engine or request Chrome Frame -->
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">

    <!-- Use title if it's in the page YAML frontmatter -->
    <title>Emberjs Model RestAdapter Conventions</title>

    <meta name="description" content="A tech blog about learnings in DevOps, Go, Ruby and software engineering in general, written by Boa Ho Man" />
<meta property="og:site_name" content="aranair.github.io" />
<meta property="og:title" content="Emberjs Model RestAdapter Conventions" />

    <!-- Bootstrap Stuff -->
    <link href=rel="stylesheet" type="text/css">
    <link rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Source+Sans+Pro|Lato|Montserrat">
    <link href="/stylesheets/normalize-ef7858ef.css" rel="stylesheet" />
    <link href="/stylesheets/blog-e62ae23a.css" rel="stylesheet" />
    <script src="/javascripts/all-0a091114.js" async="true"></script>
    <!-- Latest compiled and minified JavaScript -->
    <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-51305292-1', 'auto');
  ga('send', 'pageview');
</script>

  </head>
  <body class="posts posts_2013 posts_2013_08 posts_2013_08_04 posts_2013_08_04_emberjs-model-restadapter-conventions posts_2013_08_04_emberjs-model-restadapter-conventions_index">
    <header id="header" class="header header--fixed" role="banner">
  <nav class="navbar navbar-default">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar-collapsible-content" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a href="/" class="navbar-links navbar-links--name pull-left">
      </a>
    </div>

    <div class="collapse navbar-collapse" id="navbar-collapsible-content">
      <a href="/posts" class="navbar-links pull-right">
        Posts
      </a>
      <a href="/projects" class="navbar-links pull-right">
        Projects
      </a>
      <a href="/bio" class="navbar-links pull-right">
        Bio
      </a>
    </div>
  </nav>
</header>

    <div class="wrapper">
      <div class="container">
        <div class="tags">
    <a href="/posts/tags/golang/" class="tags-link">golang</a>
    <a href="/posts/tags/telegram/" class="tags-link">telegram</a>
    <a href="/posts/tags/bot/" class="tags-link">bot</a>
    <a href="/posts/tags/webhooks/" class="tags-link">webhooks</a>
    <a href="/posts/tags/elasticsearch/" class="tags-link">elasticsearch</a>
    <a href="/posts/tags/aws/" class="tags-link">aws</a>
    <a href="/posts/tags/emr/" class="tags-link">emr</a>
    <a href="/posts/tags/apache-pig/" class="tags-link">apache pig</a>
    <a href="/posts/tags/hadoop/" class="tags-link">hadoop</a>
    <a href="/posts/tags/datapipeline/" class="tags-link">datapipeline</a>
    <a href="/posts/tags/ecs/" class="tags-link">ecs</a>
    <a href="/posts/tags/found-io/" class="tags-link">found.io</a>
    <a href="/posts/tags/elastic-cloud/" class="tags-link">elastic-cloud</a>
    <a href="/posts/tags/rails/" class="tags-link">rails</a>
    <a href="/posts/tags/try/" class="tags-link">try</a>
    <a href="/posts/tags/capybara/" class="tags-link">capybara</a>
    <a href="/posts/tags/docker/" class="tags-link">docker</a>
    <a href="/posts/tags/devops/" class="tags-link">devops</a>
    <a href="/posts/tags/capistrano/" class="tags-link">capistrano</a>
    <a href="/posts/tags/heka/" class="tags-link">heka</a>
    <a href="/posts/tags/bigquery/" class="tags-link">bigquery</a>
    <a href="/posts/tags/kafka/" class="tags-link">kafka</a>
    <a href="/posts/tags/protobuf/" class="tags-link">protobuf</a>
    <a href="/posts/tags/vim/" class="tags-link">vim</a>
    <a href="/posts/tags/iterm/" class="tags-link">iterm</a>
    <a href="/posts/tags/javascript/" class="tags-link">javascript</a>
    <a href="/posts/tags/emberjs/" class="tags-link">emberjs</a>
    <a href="/posts/tags/git/" class="tags-link">git</a>
    <a href="/posts/tags/scripting/" class="tags-link">scripting</a>
    <a href="/posts/tags/dnsmasq/" class="tags-link">dnsmasq</a>
    <a href="/posts/tags/bem/" class="tags-link">bem</a>
    <a href="/posts/tags/frontend/" class="tags-link">frontend</a>
    <a href="/posts/tags/meteorjs/" class="tags-link">meteorjs</a>
    <a href="/posts/tags/meteorite/" class="tags-link">meteorite</a>
    <a href="/posts/tags/heroku/" class="tags-link">heroku</a>
</div>


          <div class="article row">
    <h1 class="page-header article__article-title">
      Emberjs Model RestAdapter Conventions<br>
    </h1>
    <div class="article__published-date">
      Aug 04, 2013
      <span class="article__middle-dot"></span>
      2  minutes read
    </div>
    <div class="article__tags-container">
      <ul class="article__tags">
        <li class="article__tag">
          <a href="/posts/tags/emberjs/" class="article__tag-link">emberjs</a>
        </li>
      </ul>
    </div>
    <hr>
    <p>After I was done with exploring with local fixtures data, its time to experiment with using the RestAdapter provided by Emberjs to call the appropriate json data from the rails backend.</p>

<p>It was pretty simple and straightforward mostly. You basically just change the store to have &ldquo;adapter: DS.RESTAdapter&rdquo; and extend the model to have the appropriate attribute names from the server. (I&rsquo;m using ActiveModel serializers) It then automagically works. Emberjs helps to figure out all the paths it needs to get the appropriate data.  </p>

<p>So for example, if you bound the index/root &ldquo;/&rdquo; to the tasks model via a task router and set a nested resource for tasks in the same route. </p>
<pre class="highlight plaintext"><code>App.Router.map(function() {
    this.resource(tasks, {path: /}, function() {
       this.resource(task, {path: :task_id});
    });
});
</code></pre>
<p>It&rsquo;ll send a get request to /tasks when you&rsquo;re at root. It will also know that when you are at #/2, it should be sending the request to /tasks/2 as long as you provide the task_id to the router like above.</p>

<p>One small thing that tripped me was the code below:</p>
<pre class="highlight plaintext"><code>App.Task = DS.Model.extend({
   name: DS.attr('string'),
   task_details: DS.attr('string'),
   isCompleted: DS.attr('boolean')
});
</code></pre>
<p>How do you think the json data should look like? Like this?</p>
<pre class="highlight json"><code><span class="p">{</span><span class="w"> </span><span class="err">name</span><span class="p">:</span><span class="w"> </span><span class="err">'test'</span><span class="p">,</span><span class="w"> </span><span class="err">task_details</span><span class="p">:</span><span class="w"> </span><span class="err">'details'</span><span class="p">,</span><span class="w"> </span><span class="err">isCompleted</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">}</span><span class="w">
</span></code></pre>
<p>Apparently not so!  It turns out that Emberjs expects snake case in the JSON when the attribute name is camelized! So the correct format that you should be sending from the server should be like this!</p>
<pre class="highlight json"><code><span class="p">{</span><span class="w"> </span><span class="err">name</span><span class="p">:</span><span class="w"> </span><span class="err">'test'</span><span class="p">,</span><span class="w"> </span><span class="err">task_details</span><span class="p">:</span><span class="w"> </span><span class="err">'details'</span><span class="p">,</span><span class="w"> </span><span class="err">is_completed</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">}</span><span class="w">
</span></code></pre>
    <div id='disqus_thread'></div>
<script type='text/javascript'>
//<![CDATA[
                  var disqus_shortname = 'homan-gh-blog';
          
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
//]]>
</script>
<noscript>Please enable JavaScript to view the <a href='http://disqus.com/?ref_noscript'>comments powered by Disqus.</a></noscript>
<a href='http://disqus.com' class='dsq-brlink'>comments powered by <span class='logo-disqus'>Disqus</span></a>

    <script type="text/javascript">
//<![CDATA[
    var disqus_shortname = 'homan-gh-blog';
    (function () {
        var s = document.createElement('script'); s.async = true;
        s.type = 'text/javascript';
        s.src = '//' + disqus_shortname + '.disqus.com/count.js';
        (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
    }());
//]]>
</script>

  </div>

      </div>
    </div>
  </body>
</html>
